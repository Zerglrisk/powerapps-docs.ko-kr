---
title: Common Data Service의 엔터티 관계 개요 | MicrosoftDocs
ms.custom: ''
ms.date: 04/25/2019
ms.reviewer: ''
ms.service: powerapps
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
  - Dynamics 365 (online)
  - Dynamics 365 Version 9.x
  - PowerApps
ms.assetid: c765b6d9-4d87-4c2d-aae2-5b1c3b664a71
caps.latest.revision: 28
ms.author: matp
manager: kvivek
search.audienceType:
  - maker
search.app:
  - PowerApps
  - D365CE
---
# <a name="entity-relationships-overview"></a>엔터티 관계 개요
엔터티 관계는 데이터베이스에서 레코드를 서로 연결할 수 있는지를 정의합니다. 가장 간단한 수준에서 조회 필드를 엔터티에 추가하면 두 엔터티 간에 새로운 1:N(일대다) 관계를 만들고 양식에 조회 필드를 배치할 수 있습니다. 조회 필드를 사용하면 사용자는 해당 엔터티의 여러 *하위* 레코드를 단일 *상위* 엔터티 레코드에 연결할 수 있습니다.  
  
단순히 레코드를 다른 레코드에 연결할 수 있는 방법을 정의하는 것 외에 1:N 엔터티 관계는 다음 질문에 대한 데이터도 제공합니다.  
  
- 레코드를 삭제할 때 해당 레코드와 관련된 다른 레코드도 삭제해야 합니까?  
- 레코드를 할당하면 해당 레코드와 관련된 모든 레코드를 새 담당자에게 할당해야 합니까?  
- 기존 레코드의 컨텍스트에서 관련 레코드를 새로 만들 때 데이터 입력 프로세스를 간소화하려면 어떻게 해야 합니까?  
- 레코드를 보는 사용자가 관련 레코드를 보려면 어떻게 해야 합니까?  
  
 엔터티는 두 엔터티에 대한 여러 레코드를 서로 연결할 수 있는 N:N(다대다) 관계에도 참여할 수 있습니다.  

<a name="BKMK_Connections"></a>

## <a name="decide-whether-to-use-entity-relationships-or-connections"></a>엔터티 관계 또는 연결을 사용할지 여부 결정 
엔터티 관계는 데이터베이스를 변경하는 메타데이터입니다. 이러한 관계를 통해 쿼리는 관련 데이터를 매우 효율적으로 검색할 수 있습니다. 엔터티 관계를 사용하여 엔터티를 정의하거나 대부분의 레코드를 사용할 수 있는 공식적인 관계를 정의합니다. 예를 들어, 잠재 고객이 없는 영업 기회는 전혀 유용하지 않습니다. 영업 기회 엔터티에는 또한 경쟁 업체 엔터티와 N:N 관계가 있습니다. 이를 통해 여러 경쟁 업체를 영업 기회에 추가할 수 있습니다. 이 데이터를 캡처하고 경쟁 업체를 보여 주는 보고서를 만들 수도 있습니다.  
  
레코드 사이에 *연결*이라고 하는 덜 공식적인 종류의 관계가 있습니다. 예를 들어, 두 연락처가 결혼했는지, 직장 밖에서 친구인지, 또는 다른 거래처에 대해 작업하는 데 사용된 연락처인지 알면 유용할 수 있습니다. 대부분의 비즈니스는 이러한 종류의 정보를 사용하여 보고서를 생성하지 않거나 입력할 필요가 없으므로 엔터티 관계를 만들 필요가 없습니다. 추가 정보: [연결 역할 구성](configure-connection-roles.md)

  
<a name="BKMK_TypesOfRelationships"></a>
 
## <a name="types-of-entity-relationships"></a>엔터티 관계 유형
솔루션 탐색기에서 볼 때 엔터티 관계 유형 세 가지를 생각할 수 있습니다. 실제로는 다음 표와 같이 두 개뿐입니다.  
  
|관계 유형|설명|  
|-----------------------|-----------------|  
|**1:N(일대다)**|관련 엔터티의 조회 필드 때문에 **기본 엔터티**의 엔터티 레코드 하나를 다른 많은 **관련 엔터티** 레코드에 연결할 수 있는 엔터티 관계입니다.<br /><br /> 기본 엔터티 레코드를 볼 때 해당 레코드에 연결된 관련 엔터티 레코드 목록을 볼 수 있습니다.|  
|**N:N(다대다)**|특별한 **관계 엔터티**에 종속되는 엔터티 관계를 교차 엔터티라고도 하는데, 하나의 여러 레코드를 다른 엔터티의 많은 레코드에 연결할 수 있습니다.<br /><br /> N:N 관계에서 두 엔터티 레코드를 볼 때 관련된 다른 엔터티의 레코드 목록을 볼 수 있습니다.|  
  
디자이너에서 엔터티별로 그룹화된 보기를 표시하므로 **N:1(다대일)** 관계 유형은 사용자 인터페이스에 있습니다. 1:N 관계는 실제로 엔터티 *사이* 존재하고 각 엔터티를 **기본 엔터티** 또는 **관련 엔터티**로 참조합니다. 관련 엔터티(*하위* 엔터티라고도 함)에는 기본 엔터티(*상위* 엔터티라고도 함)의 레코드에 참조를 저장할 수 있는 조회 필드가 있습니다. N:1 관계는 관련 엔터티의 관점에서 보면 1:N 관계입니다.  
 
## <a name="entity-relationship-behavior"></a>엔터티 관계 동작
관련 엔터티 동작은 데이터 무결성을 보장하고 회사의 비즈니스 프로세스를 자동화할 수 있도록 하기 때문에 중요합니다.

### <a name="preserve-data-integrity"></a>데이터 무결성 유지
일부 엔터티는 다른 엔터티를 지원하기 위해 존재합니다. 자체로는 의미가 없습니다. 일반적으로 지원되는 기본 엔터티에 연결하는 데 필요한 조회 필드가 있습니다. 기본 레코드를 삭제할 때 어떻게 해야 합니까?

관계 동작을 사용하여 비즈니스 규칙에 따라 이를 정의할 수 있습니다. 두 가지 옵션은 다음과 같습니다.

- 관련 엔터티 레코드를 다른 기본 엔터티와 연결하여 조정할 수 있도록 기본 엔터티를 삭제하지 않도록 합니다.
- 기본 엔터티 레코드를 삭제하여 관련 엔터티가 자동으로 삭제되도록 허용합니다.

관련 엔터티가 기본 엔터티를 지원하지 않는 경우 기본 엔터티를 삭제하고 조회 값을 지울 수 있도록 허용합니다.

### <a name="automate-business-processes"></a>비즈니스 프로세스 자동화
새로운 영업 직원이 있고 현재 다른 영업 직원에게 할당된 기존 거래처 중 일부를 할당하려고 합니다. 각 거래처 레코드에는 연결된 작업 활동이 많이 있습니다. 다시 할당하려는 활성 거래처를 쉽게 찾아 새로운 영업 직원에게 할당할 수 있습니다. 그러나 거래처와 관련된 작업 활동에 무엇을 수행해야 할까요? 각 작업을 열고 새로운 판매 직원에게 할당할지 여부를 결정하시겠습니까? 아마도 힘들겠죠? 대신 관계에 일부 표준 규칙을 자동으로 적용하도록 할 수 있습니다. 이러한 규칙은 다시 할당할 거래처와 연관된 작업 레코드에만 적용됩니다. 옵션은 다음과 같습니다.  
  
- 모든 활성 작업을 다시 할당합니다.  
- 모든 작업을 다시 할당합니다. 
- 작업을 다시 할당하지 않습니다.  
- 거래처의 이전 담당자에게 현재 할당된 모든 작업을 다시 할당합니다.  
  
관계는 기본 엔터티 레코드에 대해 레코드에서 수행되는 작업이 관련 엔터티 레코드로 아래로 연속 변경되는 방법을 제어할 수 있습니다.  

### <a name="behaviors"></a>동작
특정 동작이 발생할 때 적용할 수 있는 여러 종류의 동작이 있습니다.

|동작|설명|
|--|--|
|**활성 항목 연속 변경**|모든 활성 관련 엔터티 레코드에 대해 작업을 수행합니다.|
|**모두 연속 변경**|모든 관련 엔터티 레코드에 대해 작업을 수행합니다.|
|**연속 변경 없음**|아무 작업도 수행하지 않습니다.|
|**연결 제거**|모든 관련 레코드의 조회 값을 제거합니다.|
|**제한**|관련 엔터티 레코드가 있을 때 기본 엔터티 레코드가 삭제되지 않도록 합니다.|
|**담당 항목 연속 변경**|기본 엔터티 레코드와 동일한 사용자가 담당하는 모든 관련 엔터티 레코드에 대해 작업을 수행합니다.|

### <a name="actions"></a>작업
다음은 특정 동작을 트리거할 수 있는 작업입니다.

|필드|설명|옵션|
|--|--|--|
|**할당**|기본 엔터티 레코드가 다른 사람에게 할당될 때 어떻게 해야 합니까?|모두 연속 변경<br />활성 항목 연속 변경<br />담당 항목 연속 변경<br />연속 변경 없음|
|**상위 항목 재지정**|상위/하위 관계의 관련 엔터티에 대한 상위/하위 유형 관계에 대한 조회 값이 변경될 때 어떻게 해야 합니까?<br />자세한 내용: [상위/하위 엔터티 관계](#parental-entity-relationships)|모두 연속 변경<br />활성 항목 연속 변경<br />담당 항목 연속 변경<br />연속 변경 없음|
|**공유**|기본 엔터티 레코드를 공유할 때 어떻게 해야 합니까?|모두 연속 변경<br />활성 항목 연속 변경<br />담당 항목 연속 변경<br />연속 변경 없음|
|**삭제**|기본 엔터티 레코드를 삭제할 때 어떻게 해야 합니까?|모두 연속 변경<br />연결 제거<br />제한|
|**공유 해제**|기본 엔터티 레코드를 공유하지 않을 때 어떻게 해야 합니까?|모두 연속 변경<br />활성 항목 연속 변경<br />담당 항목 연속 변경<br />연속 변경 없음|
|**병합**|기본 엔터티 레코드를 병합할 때 어떻게 해야 합니까?|모두 연속 변경<br />연속 변경 없음|
|**롤업 보기**|이 관계와 관련된 롤업 보기의 원하는 동작은 무엇입니까? |모두 연속 변경<br />활성 항목 연속 변경<br />담당 항목 연속 변경<br />연속 변경 없음|


### <a name="parental-entity-relationships"></a>상위/하위 엔터티 관계
1:N 관계를 가질 수 있는 엔터티의 각 쌍에는 엔터티 간 1:N 관계를 여러 개 가질 수 있습니다. 하지만 일반적으로 아직 이러한 관계 중 하나만 상위/하위 엔터티 관계로 간주할 수 있습니다.

상위/하위 엔터티 관계는 다음 표에서 **상위/하위** 열의 연속 변경 옵션 중 하나가 true이면 1:N 엔터티 관계입니다.

|작업|상위/하위|상위/하위 아님|  
|------------|--------------|------------------|  
|**할당**|모두 연속 변경<br />담당 항목 연속 변경<br />활성 항목 연속 변경|연속 변경 없음|  
|**삭제**|모두 연속 변경|RemoveLink<br />제한|  
|**상위 항목 재지정**|모두 연속 변경<br />담당 항목 연속 변경<br />활성 항목 연속 변경|연속 변경 없음|  
|**공유**|모두 연속 변경<br />담당 항목 연속 변경<br />활성 항목 연속 변경|연속 변경 없음|  
|**공유 해제**|모두 연속 변경<br />담당 항목 연속 변경<br />활성 항목 연속 변경|연속 변경 없음|  

예를 들어 새 사용자 지정 엔터티를 만들고 1:N 엔터티 관계를 사용자 지정 엔터티가 관련 엔터티인 거래처 엔터티에 연결하면 **상위/하위** 열에서 옵션을 사용하도록 해당 엔터티 관계에 대한 작업을 구성할 수 있습니다. 나중에 다른 1:N 엔터티 관계를 참조하는 엔터티로 사용자 지정 엔터티에 추가하면 **상위/하위 아님** 열의 옵션을 사용하는 작업을 구성할 수 있습니다.

일반적으로 각 엔터티 쌍에 대해 상위/하위 관계는 하나씩만 있습니다. 관련된 엔터티의 조회에 둘 이상의 엔터티 유형에 대한 관계가 허용될 수도 있습니다.

예를 들어 엔터티에 연락처 또는 거래처 엔터티를 참조할 수 있는 고객 조회가 있는 경우입니다. 두 가지 별도의 상위/하위 1:N 엔터티 관계가 있습니다.

모든 활동 엔터티에는 관련 조회 필드를 사용하여 연결할 수 있는 엔터티에 대해 유사한 상위/하위 엔터티 관계 집합이 있습니다.

<a name="BKMK_RelationshipBehaviorLimitations"></a>   

### <a name="limitations-on-behaviors-you-can-set"></a>설정할 수 있는 동작에 대한 제한
상위/하위 관계로 인해 엔터티 관계를 정의할 때 유의해야 할 몇 가지 제한이 있습니다.  
  
- 사용자 지정 엔터티는 연속되는 관련 시스템 엔터티와의 관계에서 기본 엔터티가 될 수 없습니다. 다시 말해, 기본 사용자 지정 엔터티와 관련 시스템 엔터티 간에 **모두 연속 변경**, **활성 항목 연속 변경** 또는 **담당 항목 연속 변경**으로 설정된 작업이 있는 관계를 사용할 수 없습니다.  
- 새 관계의 관련 엔터티가 이미 **모두 연속 변경**, **활성 항목 연속 변경** 또는 **담당 항목 연속 변경**으로 설정된 작업이 있는 다른 관계의 관련 엔터티로 구성되어 있으면 새 관계의 작업을 **모두 연속 변경**, **활성 항목 연속 변경** 또는 **담당 항목 연속 변경**으로 설정할 수 없습니다. 이는 관계에 여러 상위 관계를 만들지 못하도록 하기 위해서입니다.  

### <a name="see-also"></a>참조
[엔터티 및 메타데이터 개요](create-edit-metadata.md)<br />
[1:N(일대다) 또는 N:1(다대일) 관계 만들기 및 편집](create-edit-1n-relationships.md)<br />
[다대다(N:N) 엔터티 관계 만들기](create-edit-nn-relationships.md)

